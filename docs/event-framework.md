# Event Framework Overview

## 1. Фракции и их мотивация

| Фракция | Основная цель | Ключевые триггеры вмешательства |
| --- | --- | --- |
| Корона / центральная власть | Укрепление стабильности и расширение влияния | Спад лояльности регионов, рост влияния соперников, угрозы внешней безопасности |
| Дворянские дома | Увеличение привилегий, земель и политического веса | Изменения налоговой политики, перераспределение земель, снижение престижа | 
| Гильдии купцов | Защита торговых путей и рост прибыли | Торговые ограничения, повышение пошлин, блокада ресурсов |
| Ремесленные цеха | Поддержание спроса и условий труда | Импорт дешёвых товаров, снижение заказов, рост безработицы |
| Духовенство | Сохранение влияния на население и моральный порядок | Ереси, рост преступности, нарушение церковных традиций |
| Военное сословие / гарнизоны | Поддержание финансирования и дисциплины | Сокращение бюджета, поражения в боях, бунты |
| Крестьянство / горожане | Улучшение качества жизни и снижение налогов | Засухи, болезни, непомерные налоги, реквизиции |
| Тайная канцелярия / шпионы | Сбор информации и устранение угроз | Утечка секретов, заговоры, активность иностранных агентов |

## 2. Шаблоны событий

| Категория | Описание шаблона | Примеры вариаций |
| --- | --- | --- |
| Экономический кризис | Резкое ухудшение финансовых показателей или ресурсной базы | Обвал цен на сырьё, банкротство гильдии, потеря торгового маршрута |
| Стихийное бедствие | Природные явления с разрушительными последствиями | Засуха, наводнение, землетрясение, эпидемия |
| Политические интриги | Внутренние конфликты за власть и влияние | Заговор дворян, саботаж чиновников, скандал с наследником |
| Социальные потрясения | Массовое недовольство, протесты, бунты | Крестьянское восстание, городские протесты, религиозный раскол |
| Военные угрозы | Внешние или внутренние вооружённые конфликты | Вторжение соседей, мятеж гарнизона, пиратские набеги |
| Технологические / магические открытия | Новшества, способные изменить баланс сил | Новое оружие, алхимическое открытие, запрещённые ритуалы |
| Дипломатические кризисы | Обострение отношений с внешними силами | Требование союзников, нарушение договора, шантаж соседей |

## 3. Параметры процедурной генерации

| Параметр | Назначение | Возможные значения |
| --- | --- | --- |
| Условия появления | Контекстные факторы, необходимые для активации события | Пороговые значения ресурсов, уровень стабильности, наличие активной фракции |
| Источник события | Фракция или внешняя сила, инициирующая событие | Любая зарегистрированная фракция, случайное природное явление |
| Масштаб | Определяет охват и серьёзность | Локальный, региональный, имперский |
| Срочность | Влияет на дедлайны решений и штрафы | Низкая, средняя, высокая |
| Варианты решений | Доступные игроку реакции | 2-4 уникальных пути, включая игнорирование |
| Стоимость решений | Ресурсы, требуемые для выбранного варианта | Золото, влияние, людские ресурсы, репутация |
| Последствия | Изменения в состоянии мира после выбора | Модификаторы ресурсов, отношение фракций, разблокировка новых событий |
| Вероятность эскалации | Шанс перехода в более тяжёлую фазу | 0-100%, модифицируется действиями игрока |
| Связанные события | Цепочки или зависимости | Список идентификаторов событий, которые активируются или блокируются |

## 4. Структура данных события

```json
{
  "id": "string",                // Уникальный идентификатор события
  "title": "string",             // Название события
  "category": "enum",            // Категория из раздела 2
  "factions": ["string"],        // Фракции, вовлечённые в событие
  "conditions": {
    "metrics": {                  // Пороговые показатели
      "loyalty": "operator value",
      "treasury": "operator value"
    },
    "flags": ["string"]          // Состояния, которые должны быть активны
  },
  "triggers": ["string"],        // Конкретные активаторы (например, завершение миссии)
  "options": [
    {
      "id": "string",
      "description": "string",
      "cost": {
        "gold": "number",
        "influence": "number",
        "manpower": "number"
      },
      "effects": [
        {
          "type": "enum",        // Изменяемый параметр (ресурсы, отношение, статус)
          "target": "string",
          "value": "number",
          "duration": "number"   // Для временных эффектов
        }
      ],
      "followUps": ["string"],    // События, открывающиеся после выбора
      "cooldown": "number"       // Ходы до повторного появления
    }
  ],
  "failure": {
    "timeout": "number",         // Ходы до автоприменения последствий
    "effects": ["effectObject"]  // Негативные исходы при бездействии
  }
}
```

## 5. Заготовка для наполнения контентом

| ID события | Название | Категория | Источник / Фракция | Краткое описание | Условия появления | Варианты решений | Ключевые последствия | Связанные события |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
|  |  |  |  |  |  |  |  |  |
|  |  |  |  |  |  |  |  |  |
|  |  |  |  |  |  |  |  |  |

## 6. Примеры заполнения поля `triggers`

| ID шаблона | Пример значения `triggers` |
| --- | --- |
| `region.infrastructure.milestone` | `[
  "metric:regions.<название региона>.infrastructure",
  "flag:infrastructure_milestone"
]` |
| `region.loyalty.decline` | `[
  "metric:regions.<название региона>.loyalty",
  "flag:loyalty_warning"
]` |
| `estate.dissatisfaction` | `[
  "metric:estates.<название сословия>.satisfaction",
  "flag:estate_pressure"
]` |
| `treasury.depletion` | `[
  "metric:treasury",
  "flag:budget_alert"
]` |

